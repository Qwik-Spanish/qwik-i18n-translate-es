---
title: Qwik City y Supabase
keywords: 'supabase, db'
contributors:
  - manucorporat
  - hamatoyogi
---

# Supabase

La biblioteca `Supabase` para JS se integra perfectamente con las API del lado del servidor de Qwik, como `routeLoader$`, `routeAction$` o `server$`.

Primero, instala Supabase en tu proyecto de Qwik:

```bash
npm install @supabase/supabase-js supabase-auth-helpers-qwik
```

El segundo paso sería configurar las variables de entorno `PUBLIC_SUPABASE_URL` y `PUBLIC_SUPABASE_ANON_KEY` en el archivo `.env`. La clave "anon" puede ser expuesta de forma segura en el lado del cliente.

```bash
PUBLIC_SUPABASE_URL=https://xxxxxxx.supabase.co
PUBLIC_SUPABASE_ANON_KEY=eyJhb.......
```

Puedes obtener estos valores desde el panel de control de Supabase, crea un nuevo archivo `.env.local` en la raíz del proyecto y pega los valores allí.

> Nota: Es posible utilizar Supabase con Qwik completamente en el lado del cliente, sin embargo, perderías algunos de los beneficios de rendimiento que se pueden obtener al aprovechar el servidor. Para un ejemplo funcional y código, visita [este repositorio](https://github.com/hamatoyogi/qwik-supabase-example).

## Lado del servidor

El cliente de Supabase ahora puede ser utilizado en el lado del servidor, en `routeLoader`s y `routeAction`s, mediante la llamada a la función `createServerClient`.

```tsx
import { routeLoader$ } from '@builder.io/qwik-city';
import { createServerClient } from 'supabase-auth-helpers-qwik';

export const useDBTest = routeLoader$(async (requestEv) => {
  const supabaseClient = createServerClient(
    requestEv.env.get("PUBLIC_SUPABASE_URL")!,
    requestEv.env.get("PUBLIC_SUPABASE_ANON_KEY")!,
    requestEv
  );
  const { data } = await supabaseClient.from('test').select('*')
  return { data };
});
```
