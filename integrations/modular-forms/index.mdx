---
title: Formularios Modulares
keywords: 'form, library, validation, type-safe'
contributors:
  - fabian-hiller
---

# Formularios Modulares

[Modular Forms](https://modularforms.dev/) es una biblioteca de formularios de tipado seguro construida nativamente en Qwik. Su diseño sin interfaz gráfica te brinda un control total sobre la apariencia visual de tu formulario. La biblioteca se encarga de la gestión del estado y la validación de entradas.

Para comenzar, instala el paquete npm:

```bash
npm install @modular-forms/qwik
```

## Define tu formulario

Antes de comenzar a crear un formulario, debes definir la estructura y los tipos de datos de los campos. Además de cadenas de texto, Modular Forms también puede manejar booleanos, números, archivos, fechas, objetos y matrices.

```ts
type LoginForm = {
  email: string;
  password: string;
};
```

Dado que Modular Forms admite Zod para la validación de entradas, también puedes derivar opcionalmente la definición de tipos desde un esquema.

```ts
const loginSchema = z.object({
  email: z
    .string()
    .min(1, 'Por favor, ingresa tu correo electrónico.')
    .email('El formato del correo electrónico es incorrecto.'),
  password: z
    .string()
    .min(1, 'Por favor, ingresa tu contraseña.')
    .min(8, 'Tu contraseña debe tener 8 caracteres o más.'),
});

type LoginForm = z.infer<typeof loginSchema>;
```

## Establece valores iniciales

Una vez que hayas creado la definición de tipos, continúa con los valores iniciales de tu formulario. Para ello, crea un [`routeLoader$`](../../route-loader/) y úsalo como genérico con el tipo que hayas creado previamente.

```ts
export const useFormLoader = routeLoader$<InitialValues<LoginForm>>(() => ({
  email: '',
  password: '',
}));
```

En lugar de cadenas de texto vacías, en `routeLoader$` también puedes consultar y pasar valores desde tu base de datos. En función del objeto pasado, el almacenamiento de tu formulario se inicializará para permitir a Qwik representar de manera confiable tu sitio web en el servidor. Los valores iniciales también se utilizan más adelante para comprobar si el valor de un campo ha cambiado después de la entrada del usuario.

## Crea un formulario

Para crear un formulario, utiliza el hook [`useForm`](https://modularforms.dev/qwik/api/useForm). Devuelve el almacenamiento de tu formulario y un objeto con un componente `Form`, `Field` y `FieldArray`. Como parámetro, pasa un objeto a `useForm` con el cargador (routeLoader$) creado anteriormente.

```ts
export default component$(() => {
  const [loginForm, { Form, Field, FieldArray }] = useForm<LoginForm>({
    loader: useFormLoader(),
  });
});
```

Puedes usar el objeto `loginForm` para acceder al estado actual de tu formulario. Además, puedes pasarlo a varios métodos proporcionados por la biblioteca, como [`reset`](https://modularforms.dev/qwik/api/reset) o [`setValue`](https://modularforms.dev/qwik/api/setValue), para realizar cambios manuales en el estado.

En la parte JSX de tu componente, continúa con el componente [`Form`](https://modularforms.dev/qwik/api/Form). Este envuelve los campos de tu formulario y, a través de sus propiedades, puedes definir lo que sucede cuando se envía el formulario.

```tsx
export default component$(() => {
  const [loginForm, { Form, Field, FieldArray }] = useForm<LoginForm>({
    loader: useFormLoader(),
  });

  return <Form>…</Form>;
});
```

## Agrega campos al formulario

Ahora puedes proceder con los campos de tu formulario. Con los componentes [`Field`](https://modularforms.dev/qwik/api/Field) y [`FieldArray`](https://modularforms.dev/qwik/api/FieldArray), registras un campo o una matriz de campos. Ambos componentes son headless y te proporcionan acceso directo a su estado actual. El segundo parámetro de la función de representación debe pasarse a un elemento `<input />`, `<select />` o `<textarea />` para conectarlo a tu formulario.

```tsx
<Form>
  <Field name="email">
    {(field, props) => (
      <input {...props} type="email" value={field.value} />
    )}
  </Field>
  <Field name="password">
    {(field, props) => (
      <input {...props} type="password" value={field.value} />
    )}
  </Field>
  <input type="submit" />
</Form>
```

Este diseño de API resulta en un formulario totalmente seguro en cuanto a tipos. Además, te brinda un control total sobre la interfaz de usuario. Puedes desarrollar tu propio componente [`TextInput`](https://modularforms.dev/qwik/guides/input-components) o conectar una biblioteca de componentes preconstruidos.

## Validación de entradas

Una de las funcionalidades principales de Modular Forms es la validación de entradas. Puedes utilizar un esquema Zod para esto o nuestras funciones internas de validación. Para mantener esta guía simple, utilizamos el esquema Zod que creamos anteriormente y lo pasamos al hook `useForm`.

```ts
const [loginForm, { Form, Field, FieldArray }] = useForm<LoginForm>({
  loader: useFormLoader(),
  validate: zodForm$(loginSchema),
});
```

Ahora solo necesitas mostrar los mensajes de error de tus campos en caso de que haya un error.

```tsx
<Field name="email">
  {(field, props) => (
    <div>
      <input {...props} type="email" value={field.value} />
      {field.error && <div>{field.error}</div>}
    </div>
  )}
</Field>
```

## Manejo del envío

En el último paso, solo debes acceder a los valores a través de una función al enviar el formulario para procesarlos y utilizarlos más adelante. Puedes utilizar [`formAction$`](https://modularforms.dev/qwik/api/formAction$) para esto o la propiedad `onSubmit$` del componente `Form`.

```tsx
export const useFormAction = formAction$<LoginForm>((values) => {
  // Se ejecuta en el servidor
}, zodForm$(loginSchema));

export default component$(() => {
  const [loginForm, { Form, Field }] = useForm<LoginForm>({
    loader: useFormLoader(),
    action: useFormAction(),
    validate: zodForm$(loginSchema),
  });

  const handleSubmit: SubmitHandler<LoginForm> = $((values, event) => {
    // Se ejecuta en el cliente
  });

  return (
    <Form onSubmit$={handleSubmit}>
      …
    </Form>
  );
});
```

## Resumen

Has aprendido los conceptos básicos de Modular Forms y estás listo para crear tu primer formulario sencillo. Para obtener más información y detalles, puedes encontrar más guías y la referencia de API en nuestro sitio web: [modularforms.dev](https://modularforms.dev/)

> ¿Te gusta Modular Forms hasta ahora? Sería un gran honor para nosotros recibir una estrella tuya en [GitHub](https://github.com/fabian-hiller/modular-forms)!